<!--pages/select_image/foreground.wxml-->
<van-cell-group wx:for="{{ presets }}" wx:key="name" title="{{ item.name }}" inset>
  <view class="cell-content">
    <masonry
      process="filename"
      images="{{ item.images }}"
      bind:click="onClickImage" />
  </view>
</van-cell-group>

<van-cell-group title="自定义文字" inset>
  <van-field model:value="{{ outerText }}"
             label="外圈文字" left-icon="edit"
             placeholder="请输入 3-4 个汉字"
             error-message="{{ outerTextError }}"
             bind:change="onOuterTextChange" />
  <van-field model:value="{{ innerText }}"
             label="中部文字" left-icon="edit"
             placeholder="请输入 4-8 个汉字"
             error-message="{{ innerTextError }}"
             bind:change="onInnerTextChange" />

  <van-cell center>
    <view slot="title">
      阴影效果
      <van-icon name="question-o" bind:click="onShowShadowHelp" />
    </view>
    <van-switch checked="{{ shadow }}" size="24px" bind:change="onShadowChange" />
  </van-cell>
</van-cell-group>

<van-cell-group wx:if="{{ !generated }}" custom-class="cell-group-following" inset>
  <van-cell title="生成图片" is-link bind:click="onGenerate" />
</van-cell-group>

<van-cell-group wx:if="{{ generatedImage }}" custom-class="cell-group-following" inset>
  <view class="cell-content text-center">
    <van-image round width="450rpx" height="450rpx" src="{{ generatedImage }}"
               custom-class="{{ generatedImageWithShadow ? 'bg-light' : 'bg-dark' }}" />
  </view>
  <van-cell title="使用生成的图片" is-link bind:click="onUseGenerated" />
</van-cell-group>

<van-cell-group wx:if="{{ generatedPreset.length }}" custom-class="cell-group-following" inset>
  <van-collapse value="{{ customActivePreset }}" bind:change="onCustomActivePresetChange">
    <van-collapse-item title="历史记录" name="generatedList">
      <masonry
        process="none"
        images="{{ generatedPreset }}"
        image_class="bg-dark"
        bind:click="onClickImage" />
    </van-collapse-item>
  </van-collapse>
  <van-cell title="清空历史记录" title-class="text-danger" is-link bind:click="onClearGenerated" />
</van-cell-group>

<van-dialog
  show="{{ showShadowHelp }}"
  use-slot
  confirm-button-text="知道了"
  close-on-click-overlay
  bind:close="onCloseShadowHelp"
>
  <view style="padding: 16px 24px 8px">
    <text class="title" style="margin: 8px 0 24px">阴影效果</text>
    <text class="paragraph">当背景图颜色偏白，可使用阴影效果对文字描边，突出文字显示，效果如图：</text>
    <view class="text-center" style="width: 100%; margin-bottom: 24rpx">
      <van-image width="272px" height="272px" src="{{ shadowDemoUrl }}" />
    </view>
    <text class="paragraph small">注：此效果是自定义文字功能的一部分，若想对官方的中高考加油文本应用此效果，请使用自定义文字功能重新生成图片。</text>
    <text class="paragraph small">感谢 @G1910 lzy 对此功能提出的建议</text>
  </view>
</van-dialog>

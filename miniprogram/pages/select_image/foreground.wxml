<!--pages/select_image/foreground.wxml-->
<van-cell-group wx:for="{{ presets }}" wx:key="name" title="{{ item.name }}" inset>
  <view class="cell-content">
    <masonry
      process="filename"
      images="{{ item.images }}"
      image_class="bg-dark"
      bind:click="onClickImage" />
  </view>
</van-cell-group>

<van-cell-group title="自定义文字" inset>
  <van-field model:value="{{ outerText }}"
             label="外圈文字" left-icon="edit"
             placeholder="请输入 3-4 个汉字"
             error-message="{{ outerTextError }}"
             bind:change="onOuterTextChange" />
  <van-field model:value="{{ innerText }}"
             label="中部文字" left-icon="edit"
             placeholder="请输入 4-8 个汉字"
             error-message="{{ innerTextError }}"
             bind:change="onInnerTextChange" />
  <van-cell title="文字颜色" icon="brush-o" is-link bind:click="onOpenSelectColor">
    <text wx:if="{{ color === '#fff' }}">白色</text>
    <text wx:elif="{{ color === '#000' }}">黑色</text>
    <view wx:else class="color-display in-cell" style="background-color: {{ color }}" />
  </van-cell>
</van-cell-group>

<van-cell-group custom-class="cell-group-following" inset>
  <van-cell wx:if="{{ !generated }}" title="生成图片" is-link bind:click="onGenerate" />
  <view wx:if="{{ generatedImage }}" class="cell-content text-center">
    <van-image round width="450rpx" height="450rpx" src="{{ generatedImage }}" custom-class="bg-dark" />
  </view>
  <van-cell wx:if="{{ generatedImage }}" title="使用生成的图片" is-link bind:click="onUseGenerated" />
</van-cell-group>

<van-cell-group wx:if="{{ generatedPreset.length }}" custom-class="cell-group-following" inset>
  <van-collapse value="{{ customActivePreset }}" bind:change="onCustomActivePresetChange">
    <van-collapse-item title="历史记录" name="generatedList">
      <masonry
        process="none"
        images="{{ generatedPreset }}"
        image_class="bg-dark"
        bind:click="onClickImage" />
    </van-collapse-item>
  </van-collapse>
  <van-cell title="清空历史记录" title-class="text-danger" is-link bind:click="onClearGenerated" />
</van-cell-group>

<van-popup show="{{ selectColorPopupShow }}" round position="bottom" closeable bind:close="onCloseSelectColor">
  <text class="title">选择文字颜色</text>

  <view class="container" style="margin-bottom: 24px">
    <van-grid column-num="4" border="{{ false }}">
      <van-grid-item wx:for="{{ colors }}" wx:key="*this"
                     use-slot content-class="px-0 py-0"
                     data-color="{{ item }}" bind:click="onSelectColor">
        <view class="color-display large" style="background-color: {{ item }}" />
      </van-grid-item>
    </van-grid>
  </view>
</van-popup>
